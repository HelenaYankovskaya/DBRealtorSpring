-- MySQL Script generated by MySQL Workbench
-- 05/09/19 22:04:15
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydbtest
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydbtest
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydbtest` DEFAULT CHARACTER SET utf8 ;
USE `mydbtest` ;

-- -----------------------------------------------------
-- Table `mydbtest`.`UserRole`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydbtest`.`UserRole` (
                                                     `id` INT NOT NULL,
                                                     `userRole` VARCHAR(45) NULL,
                                                     PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydbtest`.`User`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydbtest`.`User` (
                                                 `id` INT NOT NULL AUTO_INCREMENT,
                                                 `name` VARCHAR(45) NULL,
                                                 `password` VARCHAR(45) NULL,
                                                 `userRoleId` INT NULL,
                                                 PRIMARY KEY (`id`),
                                                 UNIQUE INDEX `id_UNIQUE` (`id` ASC),
                                                 INDEX `UserRoleId_idx` (`userRoleId` ASC),
                                                 CONSTRAINT `UserRoleId`
                                                     FOREIGN KEY (`userRoleId`)
                                                         REFERENCES `mydbtest`.`UserRole` (`id`)
                                                         ON DELETE NO ACTION
                                                         ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydbtest`.`Client`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydbtest`.`Client` (
                                                   `id` INT NOT NULL,
                                                   `passport` VARCHAR(45) NULL,
                                                   `userId` INT NULL,
                                                   PRIMARY KEY (`id`),
                                                   INDEX `userId_idx` (`userId` ASC),
                                                   CONSTRAINT `userId`
                                                       FOREIGN KEY (`userId`)
                                                           REFERENCES `mydbtest`.`User` (`id`)
                                                           ON DELETE NO ACTION
                                                           ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydbtest`.`Realtor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydbtest`.`Realtor` (
                                                    `id` INT NOT NULL,
                                                    `post` VARCHAR(45) NULL,
                                                    `user_Id` INT NULL,
                                                    PRIMARY KEY (`id`),
                                                    INDEX `userId_idx` (`user_Id` ASC),
                                                    CONSTRAINT `user_Id`
                                                        FOREIGN KEY (`user_Id`)
                                                            REFERENCES `mydbtest`.`User` (`id`)
                                                            ON DELETE NO ACTION
                                                            ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydbtest`.`Plan`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydbtest`.`Plan` (
                                                 `id` INT NOT NULL,
                                                 `plan` VARCHAR(45) NULL,
                                                 PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydbtest`.`Repair`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydbtest`.`Repair` (
                                                   `id` INT NOT NULL,
                                                   `repair` VARCHAR(45) NULL,
                                                   PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydbtest`.`Walls`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydbtest`.`Walls` (
                                                  `id` INT NOT NULL,
                                                  `walls` VARCHAR(45) NULL,
                                                  PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydbtest`.`RecommendedValue`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydbtest`.`RecommendedValue` (
                                                             `id` INT NOT NULL,
                                                             `recommendedValue` INT NULL,
                                                             PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydbtest`.`Flat`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydbtest`.`Flat` (
                                                 `id` INT NOT NULL,
                                                 `address` VARCHAR(45) NULL,
                                                 `square` INT NULL,
                                                 `isBalcony` TINYINT(1) NULL,
                                                 `numberRooms` INT NULL,
                                                 `value` INT NULL,
                                                 `idPlan` INT NULL,
                                                 `idRepair` INT NULL,
                                                 `idWalls` INT NULL,
                                                 `idRecommendedValue` INT NULL,
                                                 PRIMARY KEY (`id`),
                                                 INDEX `idPlan_idx` (`idPlan` ASC),
                                                 INDEX `idRepair_idx` (`idRepair` ASC),
                                                 INDEX `idWalls_idx` (`idWalls` ASC),
                                                 INDEX `idRecommendedValue_idx` (`idRecommendedValue` ASC),
                                                 CONSTRAINT `idPlan`
                                                     FOREIGN KEY (`idPlan`)
                                                         REFERENCES `mydbtest`.`Plan` (`id`)
                                                         ON DELETE NO ACTION
                                                         ON UPDATE NO ACTION,
                                                 CONSTRAINT `idRepair`
                                                     FOREIGN KEY (`idRepair`)
                                                         REFERENCES `mydbtest`.`Repair` (`id`)
                                                         ON DELETE NO ACTION
                                                         ON UPDATE NO ACTION,
                                                 CONSTRAINT `idWalls`
                                                     FOREIGN KEY (`idWalls`)
                                                         REFERENCES `mydbtest`.`Walls` (`id`)
                                                         ON DELETE NO ACTION
                                                         ON UPDATE NO ACTION,
                                                 CONSTRAINT `idRecommendedValue`
                                                     FOREIGN KEY (`idRecommendedValue`)
                                                         REFERENCES `mydbtest`.`RecommendedValue` (`id`)
                                                         ON DELETE NO ACTION
                                                         ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydbtest`.`ServiceModel`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydbtest`.`ServiceModel` (
                                                         `id` INT NOT NULL,
                                                         `ServiceModel` VARCHAR(45) NULL,
                                                         `ServiceValue` VARCHAR(45) NOT NULL,
                                                         PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydbtest`.`Contracts`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydbtest`.`Contracts` (
                                                      `id` INT NOT NULL,
                                                      `data` VARCHAR(45) NULL,
                                                      `idRealtor` INT NULL,
                                                      `idFlat` INT NULL,
                                                      PRIMARY KEY (`id`),
                                                      INDEX `idRealtor_idx` (`idRealtor` ASC),
                                                      INDEX `idFlat_idx` (`idFlat` ASC),
                                                      CONSTRAINT `idRealtor`
                                                          FOREIGN KEY (`idRealtor`)
                                                              REFERENCES `mydbtest`.`Realtor` (`id`)
                                                              ON DELETE NO ACTION
                                                              ON UPDATE NO ACTION,
                                                      CONSTRAINT `idFlat`
                                                          FOREIGN KEY (`idFlat`)
                                                              REFERENCES `mydbtest`.`Flat` (`id`)
                                                              ON DELETE NO ACTION
                                                              ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydbtest`.`ServiceModel_has_Client`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydbtest`.`ServiceModel_has_Client` (
                                                                    `ServiceModel_id` INT NOT NULL,
                                                                    `Client_id` INT NOT NULL,
                                                                    PRIMARY KEY (`ServiceModel_id`, `Client_id`),
                                                                    INDEX `fk_ServiceModel_has_Client_Client1_idx` (`Client_id` ASC),
                                                                    INDEX `fk_ServiceModel_has_Client_ServiceModel1_idx` (`ServiceModel_id` ASC),
                                                                    CONSTRAINT `fk_ServiceModel_has_Client_ServiceModel1`
                                                                        FOREIGN KEY (`ServiceModel_id`)
                                                                            REFERENCES `mydbtest`.`ServiceModel` (`id`)
                                                                            ON DELETE NO ACTION
                                                                            ON UPDATE NO ACTION,
                                                                    CONSTRAINT `fk_ServiceModel_has_Client_Client1`
                                                                        FOREIGN KEY (`Client_id`)
                                                                            REFERENCES `mydbtest`.`Client` (`id`)
                                                                            ON DELETE NO ACTION
                                                                            ON UPDATE NO ACTION)
    ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `mydbtest`.`UserRole`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydbtest`;
INSERT INTO `mydbtest`.`UserRole` (`id`, `userRole`) VALUES (1, 'admin');
INSERT INTO `mydbtest`.`UserRole` (`id`, `userRole`) VALUES (2, 'client');
INSERT INTO `mydbtest`.`UserRole` (`id`, `userRole`) VALUES (3, 'realtor');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydbtest`.`User`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydbtest`;
INSERT INTO `mydbtest`.`User` (`id`, `name`, `password`, `userRoleId`) VALUES (1, 'Helen', '1111', 1);
INSERT INTO `mydbtest`.`User` (`id`, `name`, `password`, `userRoleId`) VALUES (2, 'Valera', '2222', 2);
INSERT INTO `mydbtest`.`User` (`id`, `name`, `password`, `userRoleId`) VALUES (3, 'Max', '3333', 3);
INSERT INTO `mydbtest`.`User` (`id`, `name`, `password`, `userRoleId`) VALUES (4, 'Alex', '1234', 2);
INSERT INTO `mydbtest`.`User` (`id`, `name`, `password`, `userRoleId`) VALUES (5, 'Mike', '4444', 2);
INSERT INTO `mydbtest`.`User` (`id`, `name`, `password`, `userRoleId`) VALUES (6, 'Margo', '5555', 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydbtest`.`Client`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydbtest`;
INSERT INTO `mydbtest`.`Client` (`id`, `passport`, `userId`) VALUES (1, 'KH1515000', 2);
INSERT INTO `mydbtest`.`Client` (`id`, `passport`, `userId`) VALUES (2, 'KH1516000', 4);
INSERT INTO `mydbtest`.`Client` (`id`, `passport`, `userId`) VALUES (3, 'KH3303003', 5);
INSERT INTO `mydbtest`.`Client` (`id`, `passport`, `userId`) VALUES (4, 'KH5505005', 6);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydbtest`.`Realtor`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydbtest`;
INSERT INTO `mydbtest`.`Realtor` (`id`, `post`, `user_Id`) VALUES (1, 'specialist', 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydbtest`.`Plan`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydbtest`;
INSERT INTO `mydbtest`.`Plan` (`id`, `plan`) VALUES (1, 'cheshka');
INSERT INTO `mydbtest`.`Plan` (`id`, `plan`) VALUES (2, 'new');
INSERT INTO `mydbtest`.`Plan` (`id`, `plan`) VALUES (3, 'brezhnevka');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydbtest`.`Repair`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydbtest`;
INSERT INTO `mydbtest`.`Repair` (`id`, `repair`) VALUES (1, 'very good');
INSERT INTO `mydbtest`.`Repair` (`id`, `repair`) VALUES (2, 'standart');
INSERT INTO `mydbtest`.`Repair` (`id`, `repair`) VALUES (3, 'bad');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydbtest`.`Walls`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydbtest`;
INSERT INTO `mydbtest`.`Walls` (`id`, `walls`) VALUES (1, 'panel');
INSERT INTO `mydbtest`.`Walls` (`id`, `walls`) VALUES (2, 'blockes');
INSERT INTO `mydbtest`.`Walls` (`id`, `walls`) VALUES (3, 'brickes');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydbtest`.`Flat`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydbtest`;
INSERT INTO `mydbtest`.`Flat` (`id`, `address`, `square`, `isBalcony`, `numberRooms`, `value`, `idPlan`, `idRepair`, `idWalls`, `idRecommendedValue`) VALUES (3, 'Grodno, Strelkovskaya street, 11-66', 56, true, 2, 37000, 2, 2, 2, NULL);
INSERT INTO `mydbtest`.`Flat` (`id`, `address`, `square`, `isBalcony`, `numberRooms`, `value`, `idPlan`, `idRepair`, `idWalls`, `idRecommendedValue`) VALUES (4, 'Grodno, Dombrovskogo street,43-15', 42, true, 2, 28000, 3, 3, 3, NULL);
INSERT INTO `mydbtest`.`Flat` (`id`, `address`, `square`, `isBalcony`, `numberRooms`, `value`, `idPlan`, `idRepair`, `idWalls`, `idRecommendedValue`) VALUES (1, 'Grodno, Tavlaya street,44-185', 84, true, 4, 48000, 2, 2, 1, NULL);
INSERT INTO `mydbtest`.`Flat` (`id`, `address`, `square`, `isBalcony`, `numberRooms`, `value`, `idPlan`, `idRepair`, `idWalls`, `idRecommendedValue`) VALUES (2, 'Grodno, Kalinovskiy street,73-45', 73, true, 3, 42000, 1, 2, 1, NULL);
INSERT INTO `mydbtest`.`Flat` (`id`, `address`, `square`, `isBalcony`, `numberRooms`, `value`, `idPlan`, `idRepair`, `idWalls`, `idRecommendedValue`) VALUES (5, 'Grodno, Pushlina street,15-68', 40, true, 1, 30000, 2, 1, 2, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydbtest`.`ServiceModel`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydbtest`;
INSERT INTO `mydbtest`.`ServiceModel` (`id`, `ServiceModel`, `ServiceValue`) VALUES (1, 'buy', '250');
INSERT INTO `mydbtest`.`ServiceModel` (`id`, `ServiceModel`, `ServiceValue`) VALUES (2, 'sale', '1000');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydbtest`.`Contracts`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydbtest`;
INSERT INTO `mydbtest`.`Contracts` (`id`, `data`, `idRealtor`, `idFlat`) VALUES (1, '05.06.2018', 1, 1);
INSERT INTO `mydbtest`.`Contracts` (`id`, `data`, `idRealtor`, `idFlat`) VALUES (2, '05.09.2018', 1, 2);
INSERT INTO `mydbtest`.`Contracts` (`id`, `data`, `idRealtor`, `idFlat`) VALUES (3, '18.10.2018', 1, 3);
INSERT INTO `mydbtest`.`Contracts` (`id`, `data`, `idRealtor`, `idFlat`) VALUES (4, '12.11.2018', 1, 4);

COMMIT;

